.lint:
  stage: checks
  image: fedora:latest
  tags:
    - docker
  variables:
    BLACK_ARGS: -l80 -v --diff --color --check
  before_script:
    - if [ "$EUID" -ne 0 ]; then DNF="sudo dnf"; fi
    - ${DNF:-dnf} install -y python3-black python3-pylint python3-pip
    - if [ -n "$PYREQUIREMENTS" ]; then pip3 install --quiet -r "$PYREQUIREMENTS"; fi
  scripts:
    - black $BLACK_ARGS ${DIR:-.}
    - if [ -e .pylintrc ]; then pylint $PYLINT_ARGS ${DIR:-.}; fi
